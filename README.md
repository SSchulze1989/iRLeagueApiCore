|Branch|Status|
|------|------|
|main|[![.NET](https://github.com/SSchulze1989/iRLeagueApiCore/actions/workflows/dotnet_main_push.yml/badge.svg?branch=main&event=push)](https://github.com/SSchulze1989/iRLeagueApiCore/actions/workflows/dotnet_main_push.yml)|
|develop|[![.NET](https://github.com/SSchulze1989/iRLeagueApiCore/actions/workflows/dotnet_develop.yml/badge.svg?branch=develop&event=push)](https://github.com/SSchulze1989/iRLeagueApiCore/actions/workflows/dotnet_develop.yml)|

# iRLeagueApi live
Development server:
https://irleaguemanager.net/api/swagger

# This is the full backend of the iRLeaguemanager.net service & API

It contains several projects necessary for running the service and communicating with the web frontend:

## [iRLeagueDatabaseCore](https://github.com/SSchulze1989/iRLeagueApiCore/tree/develop/src/iRLeagueDatabaseCore)

Data model driven database structure using EntityFramework & MySQL. This project uses Entity models to configure table columns and foreign keys in the database.
The SQL for select and update operations is generated by EntityFramework and accessed in code through database context objects.
The repo also contains migration scripts to safely migrate older databases.

## [iRLeagueApiCore.Server](https://github.com/SSchulze1989/iRLeagueApiCore/tree/develop/src/iRLeagueApiCore.Server)

This is the exectuable program to run as backend server. The project contains all configurations, API routing, handlers for dealing with API requests as well as other services running as background tasks.

### Project structure

* **Controllers (API routing)**  
  ASP.NET Core REST API using Controllers to define API routes and behaviour.

* **Handlers**  
  Handlers contain business logic to deal with certain requests. This project uses MediatR to send requests from API controllers to handlers.

* **Validation**  
  Validation logic using FluentValidation to define Rules for API requests and models

* **Filters**  
  Filter attributes to configure API Controller behaviour.

## [iRLeagueApiCore.Common](https://github.com/SSchulze1989/iRLeagueApiCore/tree/develop/src/iRLeagueApiCore.Common)

Common models and definitions used when communicating with the iRLeagueManager API. These models also serve as returned values in the iRLeagueApiCore.Client.

## [iRLeagueApiCore.Client](https://github.com/SSchulze1989/iRLeagueApiCore/tree/develop/src/iRLeagueApiCore.Client)

Simple client for using the iRLeagueManager API from a .NET application

### Usage

#### Register service

```csharp
services.AddLeagueApiClient();
```

#### Use client

```csharp
client = service.GetRequiredService<ILeagueApiClient>();

var leagues = await client.Leagues().Get();
```

#### Log in as API user

```csharp
await client.LogIn("Username", "Password");
```

